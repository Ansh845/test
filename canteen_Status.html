<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Status</title>
    <link rel="stylesheet" href="canteen_status.css">
    <link rel="icon" href="amul_logo.png">
    <script src="https://www.gstatic.com/firebasejs/9.17.2/firebase-database.js" type="module"></script>
    

</head>
<header>
   
</header>
<body>
    

    <div id="table_content">
        <table>
        <tr>
            <th>Canteen Name</th>
            <th>Name of Canteen Owner</th>
            <th>Contact number</th>
            <th>Status of Canteen</th>
        </tr>
        <tr>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        </table>
    </div>

    <nav>
        <h1 style="margin-left: 60px; font-size: 40px;margin-top: 25px;font-family: cursive;" >Canteen Central</h1>
        <ul>
            <img src="logo_canteen.png" alt="" height="47px" width="47px" style="float: left; border-radius: 50%; margin-top: -12px; margin-left: -25px;border: solid 3px black;">
           <a href="Login_window.html" class="nav_btn1"  title="Click here to redirect to login page" > <li class="li1"><b> Login/Signup</b></li></a>
           <a href="register_your_canteen.html" class="nav_btn2"  title="Want to register your canteen with us? Click here"> <li class="li2"><b> Register your Canteen</b></li> </a>
           <a href="index.html" class="nav_btn3" title="get back to home page"><li class="li3"><b>Home</b></li></a>
                
        </ul>
    </nav>


    <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-app.js";
    import { getDatabase , ref, onValue, child, get} from "https://www.gstatic.com/firebasejs/9.18.0/firebase-database.js";

const firebaseConfig = {
      //****************** add your configaration here *******************//
      apiKey: "AIzaSyBf_inD4Hqb2zqkmCuha69YEEgZ0EvSdDI",
  authDomain: "canteen-live-status-65e71.firebaseapp.com",
  databaseURL: "https://canteen-live-status-65e71-default-rtdb.firebaseio.com",
  projectId: "canteen-live-status-65e71",
  storageBucket: "canteen-live-status-65e71.appspot.com",
  messagingSenderId: "427128725985",
  appId: "1:427128725985:web:161d9f41d3e126af35b2a0",
  measurementId: "G-YH01SPNTT2"
    };

      // Initialize Firebase
       const app = initializeApp(firebaseConfig);
       const db= getDatabase();




function creatingTable(cant_NAME, own_name, stats, cont_numb){
    let trow = document.createElement('tr');
    let td1 = document.createElement('td');
    let td2 = document.createElement('td');
    let td3 = document.createElement('td');
    let td4 = document.createElement('td');

    td1.innerHTML = cant_NAME;
    td2.innerHTML = own_name;
    td3.innerHTML = stats;
    td4.innerHTML = cont_numb;

    trow.appendChild(td1);
    trow.appendChild(td2);
    trow.appendChild(td3);
    trow.appendChild(td4);

    function AddItemsToTable(CLASS){
        CLASS.forEach(element => {
           creatingTable(element.canteen_name, element.canteen_owner, element.status, element.contact_number); 
        });
    }



  
}



function getDATA(){
    const dbRef = ref(database);
    get(child(dbRef, 'users'))
    .then((snapshot)=>{
        var user = [];

        snapshot.forEach(childSnapshot=>{
             user.push(childSnapshot.val());
        });
        AddItemsToTable(user);
    })
}


window.onload =getDATA;


    </script>
</body>       
</html>
